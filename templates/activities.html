{% extends "base.html" %}

{% block content %}
    <h1>Search Activities</h1>

    <!-- Search Form with pre-filled values -->
    <form action="{{ url_for('activities') }}" method="get">
        <div class="form-group">
            <label for="search">Keyword:</label>
            <input type="text" class="form-control" name="search" id="search" value="{{ request.args.get('search', '') }}" placeholder="Search by title or description">
        </div>

        <div class="form-group">
            <label for="filter">DCF Element:</label>
            <select name="filter" class="form-control">
                <option value="">All</option>
                <option value="Data and Information Literacy" {% if request.args.get('filter') == 'Data and Information Literacy' %}selected{% endif %}>Data and Information Literacy</option>
                <option value="Problem Solving and Modelling" {% if request.args.get('filter') == 'Problem Solving and Modelling' %}selected{% endif %}>Problem Solving and Modelling</option>
                <!-- Add more options here as needed -->
            </select>
        </div>

        <div class="form-group">
            <label for="progression_step">Progression Step:</label>
            <select name="progression_step" class="form-control">
                <option value="">All</option>
                <option value="Step 2" {% if request.args.get('progression_step') == 'Step 2' %}selected{% endif %}>Step 2</option>
                <option value="Step 3" {% if request.args.get('progression_step') == 'Step 3' %}selected{% endif %}>Step 3</option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <!-- Display Results -->
    {% if activities %}
        <h2>Search Results:</h2>
        <ul class="list-group">
            {% for activity in activities %}
                <li class="list-group-item">
                    <h3>
                        <a href="{{ url_for('activity_detail', dcf_element=activity.dcf_element, template_name=activity.template_name) }}">
                            {{ activity.title }} <!-- Display the title of the activity -->
                        </a>                        
                    </h3>
                    <p>{{ activity.dcf_element }} - Progression Step: {{ activity.progression_step }}</p> <!-- Display DCF element and progression step -->
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No activities found matching your search.</p>
    {% endif %}
{% endblock %}
