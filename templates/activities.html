{% extends "base.html" %}
{% block content %}
    <h1>Search Activities</h1>
    <!-- Search Form with pre-filled values -->
    <form action="{{ url_for('search') }}" method="get">
        <div class="form-group">
            <label for="keyword">Keyword:</label>
            <input type="text" class="form-control" name="keyword" id="keyword" value="{{ request.args.get('keyword', '') }}" placeholder="Search by title or description">
        </div>

        <div class="form-group">
            <label for="dcf_element">DCF Element:</label>
            <select name="dcf_element" class="form-control">
                <option value="">All</option>
                <option value="Data and Information Literacy" {% if request.args.get('dcf_element') == 'Data and Information Literacy' %}selected{% endif %}>Data and Information Literacy</option>
                <option value="Problem-Solving and Modelling" {% if request.args.get('dcf_element') == 'Problem-Solving and Modelling' %}selected{% endif %}>Problem-Solving and Modelling</option>
            </select>
        </div>

        <div class="form-group">
            <label for="progression_step">Progression Step:</label>
            <select name="progression_step" class="form-control">
                <option value="">All</option>
                <option value="Step 2" {% if request.args.get('progression_step') == 'Step 2' %}selected{% endif %}>Step 2</option>
                <option value="Step 3" {% if request.args.get('progression_step') == 'Step 3' %}selected{% endif %}>Step 3</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <!-- Display Results -->
    {% if activities %}
        <h2>Search Results:</h2>
        <ul class="list-group">
            {% for activity in activities %}
                <li class="list-group-item">
                    <h3>{{ activity.title }}</h3>
                    <p>{{ activity.description }}</p>
                    <small><strong>DCF Element:</strong> {{ activity.dcf_element }} | <strong>Progression Step:</strong> {{ activity.progression_step }}</small>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No activities found matching your search.</p>
    {% endif %}
{% endblock %}